# AWS　単語

### rootユーザー
~~~
AWSに登録すると最初に作成されるアカウント。				
AWSサービスやリソースに対してなんでも実行できる。				
~~~

### IAMユーザー
~~~
独自に発行できるアカウント。				
必要に応じた権限を付与して利用することができる。
通常、管理権限を設定してこちらを利用する。				
~~~																											
### Budget Alert
~~~
予算アラートを設定できる。				
~~~

### AWS CloudTrail
~~~
監査ログ記録。
AWSサービスに対していつ誰が何の操作をしたか記録するサービス。
~~~


### EC2(Amazon Elastic Computed Cloud)
~~~
仮想マシン。ソフトウェアを使ってコンピュータ内に擬似的に再現したコンピュータLinuxやWindowを動作させられるサーバーマシン。				
~~~

### インスタンスタイプ
~~~
仮想マシンのスペック。
tシリーズ・・・開発向け。
mシリーズ・・・本番向け。
~~~

### EBS
~~~
EC2につけるストレージ。ハードディスクのようなもの。
~~~	

### AMI
~~~
OSイメージ。
~~~

### NGINX(webサーバー)
~~~
Apache httpdに相当するミドルウェア。処理が高速で大量処理が得意。シェアが伸びており、Apachについで2位。
~~~

### DRAW.io
~~~
AWSアイコンで設計する際に用いることができる。				
~~~

### キャッシュサーバー
~~~
静的コンテンツと動的コンテンツを振り分ける。				
~~~

### VPC(Virtual Private Cloud)
~~~
仮想ネットワーク。プロジェクト、サービス、ソリューションなどの単位でAWS内に	作成されるプライベートなネットワーク空間。	
~~~

### サブネット
~~~
AZ(Availablity Zone)を超えない範囲のネットワークグループ。	
PublicとPrivateの2っ種類を作成する。
~~~

### ルーティングテーブル
~~~
ネットワークを超えるにはルーターが必要。経路を示す情報を保持。	
異なるネットワークをまたいで通信するための経路情報を保存する。	
~~~

### セキュリティグループ
~~~
ファイアウォールに相当するもの。	
インバウンド（入ってくる通信）、アウトバウンド（出ていく通信）	
サーバーの種類ごとに作成した方がわかりやすい。	
（キャッシュサーバー用、webサーバー用、APサーバー用、DBサーバー用）
~~~

### インターネットゲートウェイ
~~~
VPCがインターネットへ接続するための出入り口。	
IG(Internet Gateway)をVPCに付与することで外部通信できるようにする。	
ルートテーブルに設定して通信が出ていけるようにする。
~~~

### SSH
~~~
通信内容が暗号化され、安全にサーバへ接続できる暗号化通信。
~~~

### SSHでのEC2インスタンスへの接続
~~~
ssh -I <KEYFILE> <USER_NAME>@<PUBLIC_IP>

KEYFILE 	接続に利用するキーペアの鍵ファイル。
USER_NAME	接続したいEC2のユーザー名。
PUBLIC_IP	接続したいEC2のパブリックIPアドレス。

Amazon Linuxのデフォルトユーザーは「ec2-user」
~~~

### SCP(Secure Copy)
~~~
サーバーへ安全にファイル転送する方法。
~~~

### SCPでEC2インスタンスへローカルファイル転送
~~~
scp -I <KEYFILE> <SOURCE> ec2-user@<PUBLIC_IP>:<TARGET>

引数							
	KEYFILE						接続に利用するキーペアの鍵ファイル
	SOURCE						転送したいローカルファイル
	PUBLIC_IP					転送先EC2のパブリックIPアドレス
	TARGET						転送先フォルダ
~~~

### AWSのビルド/リリースプロセス
~~~
ミドル・・・アプリケーション(開発したもの）を実行するための言語実行環境やフレームワーク。
サービス設定・・・システム起動時に自動実行、アプリ終了時に自動再起動などを行ってくれるサービス。
　　　　　　　　　systemdが利用するユニットファイルの作成や登録。
systemd・・・Linux起動時に実行されるもので、アプリ起動など実行管理を行う「ユニットファイル」と
　　　　　　　呼ばれる定義ファイルに従って実行管理する。
サービス登録			
　1.ユニットファイルの配置
　　　/etc/systemd/system/<UNIT_FILE>
　2.systemdに対して読み込み実行
　　　systemctl daemon-reload
~~~

### Public IP
~~~
グローバルなIPアドレス。外部からアクセスできる。
~~~
### Private IP
~~~
内部でだけ利用できるIPアドレス。
~~~
### Public Subnet
~~~
Public IPとPrivate IPの両方を割り当てる。
~~~

### Private Subnet
~~~
Private IPのみ付与。
~~~
### EIP(Elastic IP)
~~~
あらかじめ予約されたIPアドレスを確保する。
固定化されたIPアドレスの付与。
~~~
### Amazon RDS(Relational Database Service)
~~~
Managedなリレーショナルデータベースサービス。
ハードウェア、ネットワーク機器などの管理をアマゾンがやってくれる。
~~~
Aurora
~~~
Amazonが構築したRDB。MYSQL互換とPostgresql互換がある。
1AZあたり2箇所、3AZにわたってデータを保存。
本来製品より高速に応答。
~~~
サブネットグループ
~~~
RDSをどこに配置するかを指定するもの。サブネットグループを指定することで
複数AZにまたがった配置ができるようになる。どこのAZに展開するかの設定。
~~~
パラメーターグループ
~~~
その他オプション設定の指定。
~~~
スタンバイインスタンス
~~~
実行中のインスタンスがダウンした際に、自動で起動するインスタンス。
~~~
mysqlサーバー接続コマンド
~~~
mysql -u <USER> -p <PASSWORD> -h <HOST> -P <PORT>

※port番号はデフォルトで3306なので特に指定しなくとも良い
~~~
ポートフォワーディング
~~~
特定のポート番号あてのパケットをあらかじめ指定された先へ転送する。	
例）ローカルマシン→アプリケーションサーバー→DBサーバー	
~~~
ssh ポートフォワードコマンド
~~~
指定したローカルポートにリモートポート接続する。

ssh -I <KEYFILE> -NL <LOCAL_PORT>:<DB_HOST>:<DB_PORT> ec2-user@<PUBLIC_PORT>
~~~
dumpファイル
~~~
ログデータを出力してファイル形式にしたもの。
~~~
スナップショット
~~~
マシンイメージ全体を保存するもの。バックアップ。
~~~
Amazon Elastic Container Service(Amazon ECS)
~~~
AWSのコンテナオーケストレーションサービス。負荷に応じた自動スケーリング。
~~~

Amazon Elastic Container Registry
~~~
AWSのコンテナレジストリ。自身が作成したdocker imageを保存。

　タスク定義・・・コンテナに関する情報を記載したもの。さまざまなオプションを指定できる。
　　　　　　　　　イメージの場所（Amazon ECR)、ネットワーク設定、CPUなど
　タスク・・・タスク定義に基づいて起動されたタスク群。コンテナ。
　サービス・・・維持タスク数、起動タイプ(EC2/Fargate)、各AWSサービスとの連携を設定したもの。
　クラスター・・・環境の境目、タスクの実行を制御。
　AWS Fargate・・・AWSマネージドサービス。サーバの管理不要。コンテナの管理に集中できる。
　EC2起動タイプの場合・・・EC2とコンテナ両方のスケーリングを意識する必要がある。
　Fargate起動タイプの場合・・・EC2に比べて役20％ほど料金が高い。
~~~

Amazon Route 53
~~~
DNSサービス。ドメイン名をIPアドレスに変換するサービス。
ドメイン名を使ってAWSサービスへ接続できるようにする。

NSレコード・・・ドメイン情報を保持しているDNSサーバー名の定義
Aレコード・・・ドメイン名をIPアドレスに変換する定義
CNAMEレコード・・・ドメインを別ドメインに置き換える定義

ex)
	http://xxx.com → ns1.example.com(NSレコード)(xxx.com → ns2.example.com) → ns2.example.com(Aレコード)(xxx.com → n.n.n.n)
    CNAME(yyy.com → xxx.com)							
~~~

HTTPS
~~~
HTTPを暗号化して安全に通信するための仕組み
盗聴防止、改ざん防止、なりすまし防止
~~~
SSL/TLS
~~~
暗号化通信のプロトコル。	
SSL・TLSの違いはバージョン違い。	
SSLが古くてTLSが新しい。	
最近はSSLはほぼ使用されていない。

暗号化通信手順
 ①「公開鍵暗号方式」を使って共通鍵を交換する。	
 ②実際の通信は共通鍵で行う。
~~~
PKI( Public Key Infrastructure)
~~~
共通鍵交換に使う公開鍵/秘密鍵は第三者機関(認証局)が発行。
第三者機関が介在する公開鍵基盤をPKIと呼ぶ。
発行された鍵を証明書と呼ぶ。
~~~
ACM( AWS Certificate Manager)
~~~
AWSの証明書管理サービス。	
外部で発行した証明書の登録やAWS独自の証明書発行を行い、AWSサービス適用を行う。	
~~~
SSL/TLSターミネーション
~~~
SSL/TLS通信を複合して生の電文に戻すこと。
複合されるので、通信の中身を検閲して怪しい通信を検知/遮断できる。
暗号化処理がなくなるので、ネットワーク負荷が下げられる。
VPC内部でhttp通信。
~~~
S3( Amazon Simple Storage Service)
~~~
長期的なデータ保管を目的としたストレージサービス。

データ保管
　「バケット」と呼ばれる箱の中にkey-value形式でデータを保管
　「バケット」の中は「フォルダ」を作成しファイル整理できる。
　「バケット」の名前はグローバルで一意にする必要がある。

データの取り出し
　複数のEC2からアクセス可能
　外部へ静的コンテンツとして配信可能
　アクセス制御はフォルダ単位で可能

用途
　バックアップ、データレイク(吐き出されたデータの保管)、静的コンテンツ配信((画像や動画など)を配置してユーザが取得)
オブジェクトストレージ・・・さまざまな場所から読み書きできる長期保管を目的としたストレージ。

S3のアクセス権限管理
　ブロックパブリックアクセス・・・基本制御、パブリックアクセスをするかどうか制御。
　アクセスコントロールリスト(ACL)・・・大まかなアクセス制御。決められたグループに対する一覧表示、ファイル操作の制御。
　パケットポリシー・・・より詳細なアクセス制御。誰がどのリソースに対してどんな操作ができるのか。
~~~
arn
~~~
AWS内で作成されるリソースを一意に特定するキー

arn:aws:<service>:<region>:<accountID>:<resourceID>
　service・・・AWSのサービス名。S3,ec2,rdsなど。	
　region・・・リージョン名	
　accountID・・・リソースを所有するルートアカウントを一意に特定する数字	
　resouceID・・・リソースを一意に識別する名前、ID、パス。	
~~~
Amazon CloudFront
~~~
CDNサービス。
コンテンツをキャッシュし、多くのユーザーに効率的に同一コンテンツを配信する仕組み。
~~~
CDN( Content Delivery Network)
~~~
サービス提供しているサーバー負荷軽減。
ユーザーに対する応答速度向上。
CSSやJavascript、画像、動画などユーザーごとに変化しないコンテンツ配信を
別サーバー(=CDN)に委託。
~~~
静的コンテンツ
~~~
CSSやJavascript、画像、動画など、ユーザーごとに変化しないコンテンツ。
~~~
動的コンテンツ
~~~
リクエストごとに内容を変化させるコンテンツ。
~~~
エッジサーバー( キャッシュサーバー)
~~~
サーバー側で静的コンテンツをキャッシュし最初に静的コンテンツの応答をしてくれる
CDNのフロント。
~~~
オリジンサーバー
~~~
全てのコンテンツを保持。
基本はユーザーごとに変化するコンテンツを配信。
~~~

Amazon Cloud Watch
~~~
システムモニタリングサービス。AWSが提供するサービスの
システムリソースをモニタリングするサービス。

　メトリクス・・・AWSが提供するサービスに対してモニタリングできる項目のこと。
　event・・・システムの状態が変更されたことを示すシグナル
　producer・・・eventを発火する人。
　consumer・・・eventを観察し、検知したら動作をする仕組み。
　イベント駆動・・・producerとconsumerとの駆動方式。queueを介することで、処理流用をコントロール。
~~~
Amazon Simple Notification Service( Amazon SNS)
~~~
通知サービス。イベントがトリガーされると、メールやSMSなどの通知を行う通知の種類や手段をまとめたもの。
~~~
スケールアップ（反対はスケールダウン）
~~~
仮想マシンのCPUやメモリといったスペックを上げることで処理性能を高める方法
システム停止を伴うDBなどで利用。
~~~
スケールアウト	
⇨反対はスケールイン	
~~~
仮想マシンの台数を増やすことで処理性能を高める方法
システム停止を伴わないWeb, APなどで利用。
~~~
IAM( AWS Identity and Access Management)
~~~
AWSサービスに対する操作権制御。AWSを利用するためのID発行/削除といった
ID管理と発行されたIDに対する操作権制御を行う。

　ポリシー・・・ユーザーに対して何ができるのかという権限。
　グループ・・・管理者、開発者などのポリシーを設定する集団。
　ロール・・・役割名でポリシーを与えること。EC2インスタンス等にポリシーが割り当てられる。
~~~
サーバーへのメンテナンス時
~~~
運用者がログの取得やリリース等の時は、裏側から入る。

運用ルーム　→(1:1で繋がり、特定IPのみの接続許可) 踏み台　→(release, 改修) web app
~~~
SSM ( Session Manager)
~~~
踏み台サーバー準備やSSH接続許可なしにサーバー接続する仕組み
~~~

コンテナ
~~~
ホストOS上でコンテナランタイムを起動し、そのうえでプロセスとしてコンテナを起動する。
~~~

Docker
~~~
コンテナを稼働させるエンジン
~~~

エンジン
~~~
コンテナランタイムへの実行命令や管理などを行うコマンド群、それらの実行を下支えするデーモンプロセスなど、一連のコンポーネントをまとめたもの。
~~~

Instructure As Code
~~~
インフラ構成をアプリケーションのソースコードのように管理、配備するという考え方。
~~~

Kubernetes
~~~
コンテナオーケストレーションツール
~~~
コントロールプレーン
~~~
コンテナ管理やデプロイ時の自動判別や障害対応などの機能
~~~
Pod
~~~
Kubernetesの最小単位、１つのpod内には1つ以上のコンテナを稼働できる
~~~
ReplicaSet
~~~
Podをいくつ起動するかを管理するオブジェクト
~~~
Deployment
~~~
デプロイ履歴を管理する
~~~
Service
~~~
デプロイしたPodをKubernetesクラスター外部へ公開するための仕組み。ロードバランサーなど
~~~
Amazon EKS
~~~
AWSでKubernetesの制御を行うコントロールプレーンのマネージドサービス
~~~

REST
~~~
"以下のルールを指す。
①URIではリソースの指定を行う
②HTTPメソッド（POST、PUT、GET、DELETE）で追加、更新、取得、削除を設計する
③ステートレスであること（セッションといった状態管理をしない）
④HTML、XML、JSONなどのハイパーメディアの使用すること（やり取りするデータのこと）"
~~~
SPA
~~~
シングルページアプリケーション。単一のwebページでコンテンツ切り替えを行う。ページ遷移の必要がない。ブラウザ上で必要な変更を行うため、処理時間が早くなる。
~~~